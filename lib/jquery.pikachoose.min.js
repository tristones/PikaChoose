(function(c){"";"use strict";var k={autoPlay:!0,speed:5E3,text:{play:"",stop:"",previous:"Previous",next:"Next",loading:"Loading"},transition:[1],showCaption:!0,IESafe:!1,showTooltips:!1,carousel:!1,swipe:!0,carouselVertical:!1,animationFinished:null,buildFinished:null,bindsFinished:null,startOn:0,thumbOpacity:0.4,hoverPause:!1,animationSpeed:600,fadeThumbsIn:!1,carouselOptions:{},thumbChangeEvent:"click.pikachoose",stopOnClick:!1,hideImgnav:!0,hideThumbnails:!1};c.fn.PikaChoose=function(a){return this.each(function(){c(this).data("pikachoose",
new h(this,a))})};c.PikaChoose=function(a,d){this.options=c.extend({},k,d||{});this.tooltip=this.active=this.transition=this.thumbs=this.aniImg=this.aniDiv=this.aniWrap=this.next=this.previous=this.textPrev=this.textNext=this.imgNext=this.imgPrev=this.imgPlay=this.imgNav=this.caption=this.anchor=this.image=this.list=null;this.animating=!1;this.pikaStage=this.timeOut=this.counter=this.stillOut=null;"undefined"!=typeof this.options.data&&(a=c("<ul></ul>").addClass("jcarousel-skin-pika").appendTo(a),
c.each(this.options.data,function(){var b=null;"undefined"!=typeof this.link?(b=c("<li><a href='"+this.link+"'><img></a></li>").appendTo(a),"undefined"!=typeof this.title&&b.find("a").attr("title",this.title)):b=c("<li><img></li>").appendTo(a);"undefined"!=typeof this.caption&&b.append("<span>"+this.caption+"</span>");"undefined"!=typeof this.thumbnail?(b.find("img").attr("ref",this.image),b.find("img").attr("src",this.thumbnail)):b.find("img").attr("src",this.image)}));if(a instanceof jQuery||"UL"==
a.nodeName.toUpperCase()||"OL"==a.nodeName.toUpperCase()){this.list=c(a);this.build();this.bindEvents();for(var b=0,e=0,g=0;25>g;g++)this.aniDiv.append('<div col="'+b+'" row="'+e+'"></div>'),b++,5==b&&(e++,b=0)}};var h=c.PikaChoose;h.fn=h.prototype={version:"96"};c.fn.pikachoose=c.fn.PikaChoose;h.fn.extend=h.extend=c.extend;h.fn.extend({build:function(){this.step=0;this.options.pikaStage?(this.wrap=this.options.pikaStage,this.wrap.addClass("pika-stage")):this.wrap=c("<div class='pika-stage'></div>").insertBefore(this.list);
this.image=c("<img>").appendTo(this.wrap);this.imgNav=c("<div class='pika-imgnav'></div>").insertAfter(this.image);this.imgPlay=c("<a></a>").appendTo(this.imgNav);this.counter=c("<span class='pika-counter'></span>").appendTo(this.imgNav);this.options.autoPlay?this.imgPlay.addClass("pause"):this.imgPlay.addClass("play");this.imgPrev=c("<a class='previous'></a>").insertAfter(this.imgPlay);this.imgNext=c("<a class='next'></a>").insertAfter(this.imgPrev);this.caption=c("<div class='caption'></div>").insertAfter(this.imgNav).hide();
this.tooltip=c("<div class='pika-tooltip'></div>").insertAfter(this.list).hide();this.aniWrap=c("<div class='pika-aniwrap'></div>").insertAfter(this.caption);this.aniImg=c("<img>").appendTo(this.aniWrap).hide();this.aniDiv=c("<div class='pika-ani'></div>").appendTo(this.aniWrap);this.textNav=c("<div class='pika-textnav'></div>").insertAfter(this.aniWrap);this.textPrev=c("<a class='previous'>"+this.options.text.previous+"</a>").appendTo(this.textNav);this.textNext=c("<a class='next'>"+this.options.text.next+
"</a>").appendTo(this.textNav);this.list.addClass("pika-thumbs");this.thumbs=this.list.find("img");this.loader=c("<div class='pika-loader'></div>").appendTo(this.wrap).hide().html(this.options.text.loading);this.active=this.thumbs.eq(this.options.startOn);this.finishAnimating({index:this.options.startOn,source:this.active.attr("ref")||this.active.attr("src"),caption:this.active.parents("li:first").find("span:first").html(),clickThrough:this.active.parent().attr("href")||"",clickThroughTarget:this.active.parent().attr("target")||
"",clickThroughTitle:this.active.parent().attr("title")||""});this.aniDiv.css({position:"relative"});var a=this;this.updateThumbs();this.options.fadeThumbsIn&&this.list.fadeIn();this.options.hideThumbnails&&this.list.hide();if(this.options.carousel&&c.fn.jcarousel){var d=c.extend({},{vertical:this.options.carouselVertical,initCallback:function(b){jQuery(b.list).find("img").click(function(c,d){if("undefined"!==typeof d&&"auto"==d.how&&!1===a.options.autoPlay)return!1;var f=parseInt(jQuery(this).parents(".jcarousel-item").attr("jcarouselindex"),
10);jQuery(this).parents("ul").find("li:last").attr("jcarouselindex")!=f-1&&(f=0>=f-2?0:f-2);f++;b.scroll(f)})}},this.options.carouselOptions||{});this.list.jcarousel(d)}this.options.swipe&&c.fn.touchwipe&&this.wrap.touchwipe({wipeLeft:function(){a.Next()},wipeRight:function(){a.Prev()}});"function"==typeof this.options.buildFinished&&this.options.buildFinished(this)},createThumb:function(a){var d=this;this.thumbs=this.list.find("img");if("undefined"===typeof c.data(a[0],"source")){a.parents("li:first").wrapInner("<div class='clip' />");
a.hide();c.data(a[0],"clickThrough",a.parent("a").attr("href")||"");c.data(a[0],"clickThroughTarget",a.parent("a").attr("target")||"");c.data(a[0],"clickThroughTitle",a.parent("a").attr("title")||"");0<a.parent("a").length&&a.unwrap();c.data(a[0],"caption",a.next("span").html()||"");a.next("span").remove();c.data(a[0],"source",a.attr("ref")||a.attr("src"));c.data(a[0],"imageTitle",a.attr("title")||"");c.data(a[0],"imageAlt",a.attr("alt")||"");c.data(a[0],"index",this.thumbs.index(a));c.data(a[0],
"order",a.closest("ul").find("li").index(a.parents("li")));var b=c.data(a[0]);c("<img />").on("load",{data:b},function(){"function"==typeof d.options.buildThumbStart&&d.options.buildThumbStart(d);var e=c(this),g=this.width,f=this.height;0===g&&(g=e.attr("width"));0===f&&(f=e.attr("height"));var e=parseInt(a.parents(".clip").css("height").slice(0,-2),10),j=parseInt(a.parents(".clip").css("width").slice(0,-2),10);0===j&&(j=a.parents("li:first").outerWidth());0===e&&(e=a.parents("li:first").outerHeight());
j/g<e/f?(a.css({height:"100%"}),a.fadeTo(0.0010,0),a.css({left:-(a.outerWidth()-j)/2}),a.hide()):a.css({width:"100%"});a.hover(function(){clearTimeout(d.stillOut);c(this).stop(!0,!0).fadeTo(250,1);d.options.showTooltips&&d.tooltip.show().stop(!0,!0).html(b.caption).animate({top:c(this).parent().position().top,left:c(this).parent().position().left,opacity:1},"fast")},function(){c(this).hasClass("active")||(c(this).stop(!0,!0).fadeTo(250,d.options.thumbOpacity),d.stillOut=setTimeout(d.hideTooltip,700))});
b.order==d.options.startOn?(a.fadeTo(250,1),a.addClass("active"),a.parents("li").eq(0).addClass("active")):a.fadeTo(250,d.options.thumbOpacity);"function"==typeof d.options.buildThumbFinish&&d.options.buildThumbFinish(d)}).attr("src",a.attr("src"))}},bindEvents:function(){this.thumbs.on(this.options.thumbChangeEvent,{self:this},this.imgClick);this.imgNext.on("click.pikachoose",{self:this},this.nextClick);this.textNext.on("click.pikachoose",{self:this},this.nextClick);this.imgPrev.on("click.pikachoose",
{self:this},this.prevClick);this.textPrev.on("click.pikachoose",{self:this},this.prevClick);this.imgPlay.unbind("click.pikachoose").on("click.pikachoose",{self:this},this.playClick);this.wrap.unbind("mouseenter.pikachoose").on("mouseenter.pikachoose",{self:this},function(a){a.data.self.options.hideImgnav&&a.data.self.imgNav.stop(!0,!0).fadeTo("slow",1);!0===a.data.self.options.hoverPause&&clearTimeout(a.data.self.timeOut)});this.wrap.unbind("mouseleave.pikachoose").on("mouseleave.pikachoose",{self:this},
function(a){a.data.self.options.hideImgnav&&a.data.self.imgNav.stop(!0,!0).fadeTo("slow",0);if(a.data.self.options.autoPlay&&a.data.self.options.hoverPause){var c=a.data.self;a.data.self.timeOut=setTimeout(function(){c.nextClick()},a.data.self.options.speed)}});this.tooltip.unbind("mouseenter.pikachoose").on("mouseenter.pikachoose",{self:this},function(a){clearTimeout(a.data.self.stillOut)});this.tooltip.unbind("mouseleave.pikachoose").on("mouseleave.pikachoose",{self:this},function(a){a.data.self.stillOut=
setTimeout(a.data.self.hideTooltip,700)});"function"==typeof this.options.bindsFinished&&this.options.bindsFinished(this)},hideTooltip:function(){c(".pika-tooltip").animate({opacity:0.01})},imgClick:function(a,d){var b=a.data.self,e=c.data(this);if(!b.animating){if("undefined"==typeof d||"auto"!=d.how)b.options.autoPlay&&b.options.stopOnClick?b.imgPlay.trigger("click"):clearTimeout(b.timeOut);else if(!b.options.autoPlay)return!1;c(this).attr("src")!==c.data(this).source&&b.loader.fadeIn("fast");b.caption.fadeOut("slow");
b.animating=!0;b.active.fadeTo(300,b.options.thumbOpacity).removeClass("active");b.active.parents(".active").eq(0).removeClass("active");b.active=c(this);b.active.addClass("active").fadeTo(200,1);b.active.parents("li").eq(0).addClass("active");c("<img />").on("load",{self:b,data:e},function(){b.loader.fadeOut("fast");b.aniDiv.css({height:b.image.height(),width:b.image.width()}).show();b.aniDiv.children("div").css({width:"20%",height:"20%","float":"left"});var a=0;-1==b.options.transition[0]?a=Math.floor(7*
Math.random())+1:(a=b.options.transition[b.step],b.step++,b.step>=b.options.transition.length&&(b.step=0));b.options.IESafe&&c.browser.msie&&(a=1);b.doAnimation(a,e)}).attr("src",c.data(this).source)}},doAnimation:function(a,d){this.aniWrap.css({position:"absolute",top:this.wrap.css("padding-top"),left:this.wrap.css("padding-left"),width:this.wrap.width()});var b=this;b.image.stop(!0,!1);b.caption.stop().fadeOut();var e=b.aniDiv.children("div").eq(0).width(),g=b.aniDiv.children("div").eq(0).height(),
f=new Image;c(f).attr("src",d.source);f.height!=b.image.height()||b.image.width();b.aniDiv.css({height:b.image.height(),width:b.image.width()});b.aniDiv.children().each(function(){var a=c(this),b=Math.floor(a.parent().width()/5)*a.attr("col"),e=Math.floor(a.parent().height()/5)*a.attr("row");a.css({background:"url("+d.source+") -"+b+"px -"+e+"px","background-size":a.parent().width()+"px "+a.parent().height()+"px",width:"0px",height:"0px",position:"absolute",top:e+"px",left:b+"px","float":"none"})});
b.aniDiv.hide();b.aniImg.hide();switch(a){case 0:b.image.stop(!0,!0).fadeOut(b.options.animationSpeed,function(){b.image.attr("src",d.source).fadeIn(b.options.animationSpeed,function(){b.finishAnimating(d)})});break;case 1:b.aniDiv.hide();b.aniImg.height(b.image.height()).hide().attr("src",d.source);b.wrap.css({height:b.image.height()});c.when(b.image.fadeOut(b.options.animationSpeed),b.aniImg.eq(0).fadeIn(b.options.animationSpeed)).done(function(){b.finishAnimating(d)});break;case 2:b.aniDiv.show().children().hide().each(function(a){c(this).css({opacity:0.1}).show().delay(30*
a).animate({opacity:1,width:e,height:g},200,"linear",function(){24==b.aniDiv.find("div").index(this)&&b.finishAnimating(d)})});break;case 3:b.aniDiv.show().children("div:lt(5)").hide().each(function(){var a=100*c(this).attr("col");c(this).css({opacity:0.1,width:e}).show().delay(a).animate({opacity:1,height:b.image.height()},b.options.animationSpeed,"linear",function(){4==b.aniDiv.find(" div").index(this)&&b.finishAnimating(d)})});break;case 4:b.aniDiv.show().children().hide().each(function(a){if(!(4<
a)){a=30*c(this).attr("col");var f=b.gapper(c(this),g,e),h=0.7*b.options.animationSpeed;c(this).css({opacity:0.1,height:"100%"}).show().delay(a).animate({opacity:1,width:f.width},h,"linear",function(){4==b.aniDiv.find(" div").index(this)&&b.finishAnimating(d)})}});break;case 5:b.aniDiv.show().children().show().each(function(a){a=7*a*Math.floor(5*Math.random());var f=b.gapper(c(this),g,e);24==c(".animation div").index(this)&&(a=700);c(this).css({height:f.height,width:f.width,opacity:0.01}).delay(a).animate({opacity:1},
b.options.animationSpeed,function(){24==b.aniDiv.find(" div").index(this)&&b.finishAnimating(d)})});break;case 6:b.aniDiv.height(b.image.height()).hide().css({background:"url("+d.source+") top left no-repeat"});b.aniDiv.children("div").hide();b.aniDiv.css({width:0}).show().animate({width:b.image.width()},b.options.animationSpeed,function(){b.finishAnimating(d);b.aniDiv.css({background:"transparent"})});break;case 7:b.wrap.css({overflow:"hidden"}),b.aniImg.height(b.image.height()).hide().attr("src",
d.source),b.aniDiv.hide(),b.image.css({position:"relative"}).animate({left:"-"+b.wrap.outerWidth()+"px"}),b.aniImg.show(),b.aniWrap.css({left:b.wrap.outerWidth()}).show().animate({left:"0px"},b.options.animationSpeed,function(){b.finishAnimating(d)})}},finishAnimating:function(a){this.animating=!1;this.image.attr("src",a.source);this.image.attr("alt",a.imageAlt);this.image.attr("title",a.imageTitle);this.image.css({left:"0"});this.image.show();var d=this;c("<img />").on("load",function(){d.aniImg.fadeOut("fast");
d.aniDiv.fadeOut("fast")}).attr("src",a.source);var b=this.thumbs.length;this.counter.html(a.index+1+"/"+b);""!==a.clickThrough?(null===this.anchor&&(this.anchor=this.image.wrap("<a>").parent()),this.anchor.attr("href",a.clickThrough),this.anchor.attr("title",a.clickThroughTitle),this.anchor.attr("target",a.clickThroughTarget)):(0<this.image.parent("a").length&&this.image.unwrap(),this.anchor=null);this.options.showCaption&&(""!==a.caption&&null!==a.caption)&&this.caption.html(a.caption).fadeTo("slow",
1);if(this.options.autoPlay&&1<b){var e=this;this.timeOut=setTimeout(function(){e.nextClick()},this.options.speed,this.timeOut)}"function"==typeof this.options.animationFinished&&this.options.animationFinished(this)},gapper:function(a,c,b){var e;4==a.attr("row")&&(c=e=this.aniDiv.height()-5*c+c);4==a.attr("col")&&(b=e=this.aniDiv.width()-5*b+b);return{height:c,width:b}},nextClick:function(a){var c="natural",b=null;try{b=a.data.self,"function"==typeof a.data.self.options.next&&a.data.self.options.next(this)}catch(e){b=
this,c="auto"}a=b.active.parents("li:first").next().find("img");0===a.length&&(a=b.list.find("img").eq(0));a.trigger("click",{how:c});return a},prevClick:function(a){"function"==typeof a.data.self.options.previous&&a.data.self.options.previous(this);a=a.data.self;var c=a.active.parents("li:first").prev().find("img");0===c.length&&(c=a.list.find("img:last"));c.trigger("click");return c},playClick:function(a){a=a.data.self;a.options.autoPlay=!a.options.autoPlay;a.imgPlay.toggleClass("play").toggleClass("pause");
a.options.autoPlay?a.nextClick():clearTimeout(a.timeOut);return a.options.autoPlay?"playing":"paused"},Next:function(){return this.nextClick({data:{self:this}})},Prev:function(){return this.prevClick({data:{self:this}})},GoTo:function(a){a=this.list.find("img").eq(a);if(0<a.length)return a.trigger("click"),a;throw"Image not found. Images are 0 indexed.";},Play:function(){return this.options.autoPlay?"playing":this.playClick({data:{self:this}})},Pause:function(){return!this.options.autoPlay?"paused":
this.playClick({data:{self:this}})},updateThumbs:function(){var a=this;this.thumbs=this.list.find("img");this.thumbs.each(function(){a.createThumb(c(this),a)})}})})(jQuery);
